namespace = ai_incompetence_management_system

#Clean up nuclear weapons program variable
ai_incompetence_management_system.1 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#No gov admins in incorporated states
		OR = { 
			any_scope_state = { 
				is_incorporated = yes 
				NOT = { has_building = building_government_administration }
			}
			AND = {
				any_scope_state = { 
					is_incorporated = yes 
					NOT = { has_building = building_university }
				}
				in_default = no
			}
		}
		
	}

	immediate = {
		
		#Add gov admin for AI
		every_scope_state = {
			limit = { 
				is_incorporated = yes 
				NOT = { has_building = building_government_administration }
			}
			create_building = {
				building = "building_government_administration"
				level = 2
			}
		}
		if = {
			limit = { in_default = no }
			every_scope_state = {
				limit = { 
					is_incorporated = yes 
					NOT = { has_building = building_university }
				}
				create_building = {
					building = "building_university"
					level = 2
				}
			}
		}
		
	}
	
}

#Prune buildings to increase performance
ai_incompetence_management_system.2 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event OR has free markets
		OR = { 
			is_player = no
			has_law = law_type:law_laissez_faire
		}
		
		#NOT at war
		is_at_war = no
		
	}

	immediate = {
		
		#Notify player of deletion
		if = {
			limit = { 
				is_player = yes 
				has_law = law_type:law_laissez_faire
			}
			post_notification = auto_delete_building_notification
		}
		
		#Delete all inactive buildings
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_wheat_farm is_a_useless_building = yes } } remove_building = building_wheat_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_rice_farm is_a_useless_building = yes } } remove_building = building_rice_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_rye_farm is_a_useless_building = yes } } remove_building = building_rye_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_maize_farm is_a_useless_building = yes } } remove_building = building_maize_farm } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_millet_farm is_a_useless_building = yes } } remove_building = building_millet_farm } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_fishing_wharf is_a_useless_building = yes } } remove_building = building_fishing_wharf } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_livestock_ranch is_a_useless_building = yes } } remove_building = building_livestock_ranch } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_tobacco_plantation is_a_useless_building = yes } } remove_building = building_tobacco_plantation } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_vineyard_plantation is_a_useless_building = yes } } remove_building = building_vineyard_plantation } }
		
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_coal_power_plant is_a_useless_building = yes } } remove_building = building_coal_power_plant } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_power_plant is_a_useless_building = yes } } remove_building = building_power_plant } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_nuclear_power_plant is_a_useless_building = yes } } remove_building = building_nuclear_power_plant } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_hydroelectric_power_plant is_a_useless_building = yes } } remove_building = building_hydroelectric_power_plant } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_geothermal_power_plant is_a_useless_building = yes } } remove_building = building_geothermal_power_plant } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_roadway is_a_useless_building = yes } } remove_building = building_roadway } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_airport is_a_useless_building = yes } } remove_building = building_airport } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_communications_network is_a_useless_building = yes } } remove_building = building_communications_network } }
		
		#every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_skyscraper is_a_useless_building = yes } } remove_building = building_skyscraper } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_logging_camp is_a_useless_building = yes } } remove_building = building_logging_camp } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_munition_plants is_a_useless_building = yes } } remove_building = building_munition_plants } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_arms_industry is_a_useless_building = yes } } remove_building = building_arms_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_artillery_foundries is_a_useless_building = yes } } remove_building = building_artillery_foundries } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_war_machine_industry is_a_useless_building = yes } } remove_building = building_war_machine_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_warplanes_industry is_a_useless_building = yes } } remove_building = building_warplanes_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_military_shipyards is_a_useless_building = yes } } remove_building = building_military_shipyards } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_explosives_factory is_a_useless_building = yes } } remove_building = building_explosives_factory } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_aeroplane_industry is_a_useless_building = yes } } remove_building = building_aeroplane_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_shipyards is_a_useless_building = yes } } remove_building = building_shipyards } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_locomotives_industry is_a_useless_building = yes } } remove_building = building_locomotives_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_motor_industry is_a_useless_building = yes } } remove_building = building_motor_industry } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_food_industry is_a_useless_building = yes } } remove_building = building_food_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_furniture_manufacturies is_a_useless_building = yes } } remove_building = building_furniture_manufacturies } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_electrics_industry is_a_useless_building = yes } } remove_building = building_electrics_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_synthetics_plants is_a_useless_building = yes } } remove_building = building_synthetics_plants } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_tooling_workshops is_a_useless_building = yes } } remove_building = building_tooling_workshops } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_steel_mills is_a_useless_building = yes } } remove_building = building_steel_mills } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_chemical_plants is_a_useless_building = yes } } remove_building = building_chemical_plants } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_gold_mine is_a_useless_building = yes } } remove_building = building_gold_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_gold_fields is_a_useless_building = yes } } remove_building = building_gold_fields } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_iron_mine is_a_useless_building = yes } } remove_building = building_iron_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_lead_mine is_a_useless_building = yes } } remove_building = building_lead_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_coal_mine is_a_useless_building = yes } } remove_building = building_coal_mine } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_oil_rig is_a_useless_building = yes } } remove_building = building_oil_rig } }
		
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_retail_services_industry is_a_useless_building = yes } } remove_building = building_retail_services_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_corporate_services_industry is_a_useless_building = yes } } remove_building = building_corporate_services_industry } }
		every_scope_state = { if = { limit = { any_scope_building = { is_building_type = building_professional_services_industry is_a_useless_building = yes } } remove_building = building_professional_services_industry } }
		
	}
	
}

#Democratic AI does not exceed infamy limits
ai_incompetence_management_system.3 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		is_player = no
		
		#AI country is a proper democracy
		is_a_democracy = yes
		
		#High infamy
		infamy >= infamy_threshold:infamous
		
	}

	immediate = {
		
		change_infamy = -20
		
	}
	
}

#Help 0 GDP countries trade their way out of shortages
ai_incompetence_management_system.4 = {
	type = country_event
	hidden = yes

	trigger = {
		
		#AI only event
		OR = { 
			is_player = no
			has_law = law_type:law_state_capitalism
			has_law = law_type:law_interventionism
			has_law = law_type:law_laissez_faire
		}
		
		#Country has zero GDP
		#gdp < 1
		
		#Country is not isolationist
		NOT = { has_law = law_type:law_isolationism }
		
		#Country is not a junior in a CU
		is_junior_in_customs_union = no
		
		#Has convoys OR has no port in country
		OR = {
			AND = { 
				has_port = yes 
				num_convoys_available > 1 
			}
			has_port = no
		}
		
		#There are market good shortages in THIS
		market ?= {
			any_market_goods = {
				is_tradeable = yes
				market_goods_has_goods_shortage = yes
				root = {
					can_establish_any_import_route = prev.goods
				}
			}
		}
		
	}

	immediate = {
		
		#grain
		if = {
			limit = { 
				market ?= { 
					mg:grain = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:grain
						}
					}
					market ?= { 
						mg:grain ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:grain
						}
					}
				}
				create_trade_route = {
					goods = grain
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#meat
		if = {
			limit = { 
				market ?= { 
					mg:meat = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:meat
						}
					}
					market ?= { 
						mg:meat ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:meat
						}
					}
				}
				create_trade_route = {
					goods = meat
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#wood
		if = {
			limit = { 
				market ?= { 
					mg:wood = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:wood
						}
					}
					market ?= { 
						mg:wood ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:wood
						}
					}
				}
				create_trade_route = {
					goods = wood
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#tobacco
		if = {
			limit = { 
				market ?= { 
					mg:tobacco = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:tobacco
						}
					}
					market ?= { 
						mg:tobacco ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:tobacco
						}
					}
				}
				create_trade_route = {
					goods = tobacco
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#wine
		if = {
			limit = { 
				market ?= { 
					mg:wine = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:wine
						}
					}
					market ?= { 
						mg:wine ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:wine
						}
					}
				}
				create_trade_route = {
					goods = wine
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#groceries
		if = {
			limit = { 
				market ?= { 
					mg:groceries = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:groceries
						}
					}
					market ?= { 
						mg:groceries ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:groceries
						}
					}
				}
				create_trade_route = {
					goods = groceries
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#furniture
		if = {
			limit = { 
				market ?= { 
					mg:furniture = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:furniture
						}
					}
					market ?= { 
						mg:furniture ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:furniture
						}
					}
				}
				create_trade_route = {
					goods = furniture
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#telecommunications
		if = {
			limit = { 
				market ?= { 
					mg:telecommunications = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:telecommunications
						}
					}
					market ?= { 
						mg:telecommunications ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:telecommunications
						}
					}
				}
				create_trade_route = {
					goods = telecommunications
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#computers
		if = {
			limit = { 
				market ?= { 
					mg:computers = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:computers
						}
					}
					market ?= { 
						mg:computers ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:computers
						}
					}
				}
				create_trade_route = {
					goods = computers
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#iron
		if = {
			limit = { 
				market ?= { 
					mg:iron = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:iron
						}
					}
					market ?= { 
						mg:iron ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:iron
						}
					}
				}
				create_trade_route = {
					goods = iron
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#lead
		if = {
			limit = { 
				market ?= { 
					mg:lead = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:lead
						}
					}
					market ?= { 
						mg:lead ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:lead
						}
					}
				}
				create_trade_route = {
					goods = lead
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#gold
		if = {
			limit = { 
				market ?= { 
					mg:gold = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:gold
						}
					}
					market ?= { 
						mg:gold ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:gold
						}
					}
				}
				create_trade_route = {
					goods = gold
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#coal
		if = {
			limit = { 
				market ?= { 
					mg:coal = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:coal
						}
					}
					market ?= { 
						mg:coal ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:coal
						}
					}
				}
				create_trade_route = {
					goods = coal
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#oil
		if = {
			limit = { 
				market ?= { 
					mg:oil = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:oil
						}
					}
					market ?= { 
						mg:oil ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:oil
						}
					}
				}
				create_trade_route = {
					goods = oil
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#aeroplanes
		if = {
			limit = { 
				market ?= { 
					mg:aeroplanes = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:aeroplanes
						}
					}
					market ?= { 
						mg:aeroplanes ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:aeroplanes
						}
					}
				}
				create_trade_route = {
					goods = aeroplanes
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#steamers
		if = {
			limit = { 
				market ?= { 
					mg:steamers = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:steamers
						}
					}
					market ?= { 
						mg:steamers ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:steamers
						}
					}
				}
				create_trade_route = {
					goods = steamers
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#locomotives
		if = {
			limit = { 
				market ?= { 
					mg:locomotives = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:locomotives
						}
					}
					market ?= { 
						mg:locomotives ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:locomotives
						}
					}
				}
				create_trade_route = {
					goods = locomotives
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#automobiles
		if = {
			limit = { 
				market ?= { 
					mg:automobiles = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:automobiles
						}
					}
					market ?= { 
						mg:automobiles ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:automobiles
						}
					}
				}
				create_trade_route = {
					goods = automobiles
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#intellectual_property
		if = {
			limit = { 
				market ?= { 
					mg:intellectual_property = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:intellectual_property
						}
					}
					market ?= { 
						mg:intellectual_property ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:intellectual_property
						}
					}
				}
				create_trade_route = {
					goods = intellectual_property
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#corporate_services
		if = {
			limit = { 
				market ?= { 
					mg:corporate_services = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:corporate_services
						}
					}
					market ?= { 
						mg:corporate_services ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:corporate_services
						}
					}
				}
				create_trade_route = {
					goods = corporate_services
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#professional_services
		if = {
			limit = { 
				market ?= { 
					mg:professional_services = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:professional_services
						}
					}
					market ?= { 
						mg:professional_services ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:professional_services
						}
					}
				}
				create_trade_route = {
					goods = professional_services
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#construction_services
		if = {
			limit = { 
				market ?= { 
					mg:construction_services = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:construction_services
						}
					}
					market ?= { 
						mg:construction_services ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:construction_services
						}
					}
				}
				create_trade_route = {
					goods = construction_services
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#illegal_services
		if = {
			limit = { 
				market ?= { 
					mg:illegal_services = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:illegal_services
						}
					}
					market ?= { 
						mg:illegal_services ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:illegal_services
						}
					}
				}
				create_trade_route = {
					goods = illegal_services
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#industrial_robots
		if = {
			limit = { 
				market ?= { 
					mg:industrial_robots = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:industrial_robots
						}
					}
					market ?= { 
						mg:industrial_robots ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:industrial_robots
						}
					}
				}
				create_trade_route = {
					goods = industrial_robots
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#steel
		if = {
			limit = { 
				market ?= { 
					mg:steel = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:steel
						}
					}
					market ?= { 
						mg:steel ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:steel
						}
					}
				}
				create_trade_route = {
					goods = steel
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#industrial_chemicals
		if = {
			limit = { 
				market ?= { 
					mg:industrial_chemicals = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:industrial_chemicals
						}
					}
					market ?= { 
						mg:industrial_chemicals ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:industrial_chemicals
						}
					}
				}
				create_trade_route = {
					goods = industrial_chemicals
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#ammunition
		if = {
			limit = { 
				market ?= { 
					mg:ammunition = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:ammunition
						}
					}
					market ?= { 
						mg:ammunition ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:ammunition
						}
					}
				}
				create_trade_route = {
					goods = ammunition
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#small_arms
		if = {
			limit = { 
				market ?= { 
					mg:small_arms = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:small_arms
						}
					}
					market ?= { 
						mg:small_arms ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:small_arms
						}
					}
				}
				create_trade_route = {
					goods = small_arms
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#artillery
		if = {
			limit = { 
				market ?= { 
					mg:artillery = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:artillery
						}
					}
					market ?= { 
						mg:artillery ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:artillery
						}
					}
				}
				create_trade_route = {
					goods = artillery
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#tanks
		if = {
			limit = { 
				market ?= { 
					mg:tanks = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:tanks
						}
					}
					market ?= { 
						mg:tanks ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:tanks
						}
					}
				}
				create_trade_route = {
					goods = tanks
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#warplanes
		if = {
			limit = { 
				market ?= { 
					mg:warplanes = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:warplanes
						}
					}
					market ?= { 
						mg:warplanes ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:warplanes
						}
					}
				}
				create_trade_route = {
					goods = warplanes
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#ironclads
		if = {
			limit = { 
				market ?= { 
					mg:ironclads = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:ironclads
						}
					}
					market ?= { 
						mg:ironclads ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:ironclads
						}
					}
				}
				create_trade_route = {
					goods = ironclads
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		#advanced_weaponry
		if = {
			limit = { 
				market ?= { 
					mg:advanced_weaponry = { market_goods_has_goods_shortage = yes } 
				}
			}
			random_country = {
				limit = { 
					THIS_can_reach_TARGET_market = yes 
					NOT = {
						any_trade_route = {
							importer.owner = root
							goods = g:advanced_weaponry
						}
					}
					market ?= { 
						mg:advanced_weaponry ?= { market_goods_has_goods_shortage = no market_goods_production > 1 } 
					}
				}
				save_scope_as = import_from_country_scope
			}
			if = {
				limit = {
					exists = scope:import_from_country_scope
					NOT = {
						any_trade_route = {
							exporter.owner = scope:import_from_country_scope
							goods = g:advanced_weaponry
						}
					}
				}
				create_trade_route = {
					goods = advanced_weaponry
					level = 1
					direction = import
					target = scope:import_from_country_scope.market
				}
			}
		}
		
		#Notice
		if = {
			limit = { exists = scope:import_from_country_scope }
			post_notification = auto_trade_route_notification
		}
		
	}
	
}